/**
 * Name and SLU ID Number: TANK, Rithik | 2233293
 * Date: September 15, 2023,
 * Name of Project: Prelim Programming Exercises
 * Sample Run:
 *
 * ------------------------------------------------------------------------
 *                         Singly Linked Circular List
 * ------------------------------------------------------------------------
 * 	This program allows a user to keep track of a list of books, accepting
 * 	information like its type, genre and number of pages.
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 1
 * ------------------------------------------------------------------------
 *     1. Add a book at head.
 *     2. Add a book at tail.
 *     3. Add a book at an index.
 * ------------------------------------------------------------------------
 * Enter your choice: 1
 *   Enter the name of book: Harry Potter and the Chamber of Secrets
 *   Enter the genre of the book: adventure
 *   Enter the number of pages of the book: 500
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 1
 * ------------------------------------------------------------------------
 *     1. Add a book at head.
 *     2. Add a book at tail.
 *     3. Add a book at an index.
 * ------------------------------------------------------------------------
 * Enter your choice: 2
 *   Enter the name of book: Harry Potter and the Philosopher's Stone
 *   Enter the genre of the book: fantasy
 *   Enter the number of pages of the book: 521
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 1
 * ------------------------------------------------------------------------
 *     1. Add a book at head.
 *     2. Add a book at tail.
 *     3. Add a book at an index.
 * ------------------------------------------------------------------------
 * Enter your choice: 3
 * Enter index: 1
 *   Enter the name of book: Harry Potter and the Prisoner of Azkaban
 *   Enter the genre of the book: fantasy
 *   Enter the number of pages of the book: 590
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 4
 * 1. Harry Potter and the Chamber of Secrets, adventure, 500 pages.
 * 2. Harry Potter and the Prisoner of Azkaban, fantasy, 590 pages.
 * 3. Harry Potter and the Philosopher's Stone, fantasy, 521 pages.
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 1
 * ------------------------------------------------------------------------
 *     1. Add a book at head.
 *     2. Add a book at tail.
 *     3. Add a book at an index.
 * ------------------------------------------------------------------------
 * Enter your choice: 3
 * Enter index: 1
 *   Enter the name of book: Harry Potter and the Deathly Hollows
 *   Enter the genre of the book: fantasy
 *   Enter the number of pages of the book: f
 * Enter a valid number. Try again.
 *   Enter the number of pages of the book: 700
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 4
 * 1. Harry Potter and the Chamber of Secrets, adventure, 500 pages.
 * 2. Harry Potter and the Deathly Hollows, fantasy, 700 pages.
 * 3. Harry Potter and the Prisoner of Azkaban, fantasy, 590 pages.
 * 4. Harry Potter and the Philosopher's Stone, fantasy, 521 pages.
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 2
 * ------------------------------------------------------------------------
 *     1. Delete book at head.
 *     2. Delete book at tail.
 *     3. Delete a book at an index.
 * ------------------------------------------------------------------------
 * Enter your choice: 1
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 4
 * 1. Harry Potter and the Deathly Hollows, fantasy, 700 pages.
 * 2. Harry Potter and the Prisoner of Azkaban, fantasy, 590 pages.
 * 3. Harry Potter and the Philosopher's Stone, fantasy, 521 pages.
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 3
 * Enter the index of the book you would like to get: 1
 * Harry Potter and the Prisoner of Azkaban, fantasy, 590 pages.
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 2
 * ------------------------------------------------------------------------
 *     1. Delete book at head.
 *     2. Delete book at tail.
 *     3. Delete a book at an index.
 * ------------------------------------------------------------------------
 * Enter your choice: 3
 * Enter index: 1
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 4
 * 1. Harry Potter and the Deathly Hollows, fantasy, 700 pages.
 * 2. Harry Potter and the Philosopher's Stone, fantasy, 521 pages.
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 2
 * ------------------------------------------------------------------------
 *     1. Delete book at head.
 *     2. Delete book at tail.
 *     3. Delete a book at an index.
 * ------------------------------------------------------------------------
 * Enter your choice: 2
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 4
 * 1. Harry Potter and the Deathly Hollows, fantasy, 700 pages.
 * ------------------------------------------------------------------------
 *      1. Add a book to the list.
 *      2. Delete a book from the list.
 *      3. Get an object from the list.
 *      4. Display all books in the list.
 *      5. Quit program.
 * ------------------------------------------------------------------------
 * Enter your choice: 5
 * Thank you for using the program!
 *
 * Process finished with exit code 0
 */
package prelim;
import java.util.Scanner;

public class ExecutableClassMySinglyLinkedCircularList {

    /**
     * Object to be passed into the Linked Lst
     */
    public static class Book {

        /** Class variables*/
        private String name;
        private String genre;
        private int pages;

        /**
         * Default Constructor
         * Algorithm:
         *      1. Assign default values
         */
        public Book() {
            name = "Percy Jackson and the House of Hades";
            genre = "romance";
            pages = 200;
        }

        /**
         * Constructor for Book
         * Algorithm:
         *     1. Accept variables as a parameter
         *     2. Assign the passed in values to book class's variables
         * @param name : String
         * @param genre : pages
         * @param pages : int
         */
        public Book(String name, String genre, int pages) {
            this.name = name;
            this.genre = genre;
            this.pages = pages;
        }

        /**
         * Return the name of Book
         * @return name
         */
        public String getName() {
            return name;
        }

        /**
         * Returns the genre of the Book
         * @return genre
         */
        public String getGenre() {
            return genre;
        }

        /**
         * Returns the number of pages of the Book
         * @return pages
         */
        public int getPages() {
            return pages;
        }

        /**
         * Set the name of the Book
         * @param name : String
         */
        public void setName(String name) {
            this.name = name;
        }

        /**
         * Set the genre of the book
         * @param genre : String
         */
        public void setGenre(String genre) {
            this.genre = genre;
        }

        /**
         * Set the number of pages of the book
         * @param pages : int
         */
        public void setPages(int pages) {
            this.pages = pages;
        }

        /**
         * Returns the Book object in string representations
         * @return name, genre, pages.
         */
        public String toString() {
            return name + ", " + genre + ", " + pages + " pages.";
        }
    }


    static Scanner keyboard = new Scanner(System.in);                       // Scanner object to be used to accept user int
    static MySinglyLinkedCircularList<Book> bookList = new MySinglyLinkedCircularList<Book>(); // Create a MySinglyLinkedCircularList to hold all the Books

    static String invalidNumber = "Enter a valid number.";                  // Error message for when an invalid number is passed in
    static String indexDoesNotExist = "There is no room for the book " +     // Error message for when the index does not exist
            "at that index";

    /**
     * Main Method
     * @param args : String[]
     */
    public static void main(String[] args) {
        showHeader();
        showInstructions();
        run();
    }

    /**
     * Method to show introduction to user
     */
    public static void showHeader() {
        System.out.println("------------------------------------------------------------------------");
        System.out.println("                        Singly Linked Circular List                 ");
        System.out.println("------------------------------------------------------------------------");
    }

    /**
     * Method to show what the application does to user.
     */
    public static void showInstructions() {
        System.out.println("\tThis program allows a user to keep track of a list of books, " +
                "accepting \n\tinformation like its type, genre and number of pages.");
    }

    /**
     * Method to handle running the program
     * Algorithm:
     *      1. Create a do while statement to always run
     *          1.1. Call the logicMenu method
     */
    public static void run() {
        do {
            try {
                logicMenu();
            } catch (NullPointerException ex) {
                System.out.println("There are no books in the list.");
            }
        } while (true);
    }

    /**
     * Method to handle the logic of the main menu
     * Algorithm:
     *      1. Show the main menu to user
     *      2. Request a choice from user using enterChoice method
     *      3. Create a switch case for user choice
     *          3.1. Let 5 different cases handle the 5 different functions of the program:
     *              - Add an object
     *              - delete an object
     *              - get an object
     *              - show all books
     *              - quit program
     */
    public static void logicMenu(){
        showMainMenu();
        int choice = enterChoice(1,5, "Enter your choice: ", invalidNumber);
        switch (choice) {
            case 1-> addObject();
            case 2-> deleteObject();
            case 3-> getObject();
            case 4-> showBooks();
            case 5-> quit();
        }
    }

    /**
     * Method to show a list of all the possible functions of the application to the user
     * Algorithm:
     *      1. Make use of println to display all the numbered possible functions to user
     */
    public static void showMainMenu() {
        System.out.println("------------------------------------------------------------------------");
        System.out.println("     1. Add a book to the list.");
        System.out.println("     2. Delete a book from the list.");
        System.out.println("     3. Get an object from the list.");
        System.out.println("     4. Display all books in the list. ");
        System.out.println("     5. Quit program.");
        System.out.println("------------------------------------------------------------------------");
    }

    /**
     * Method to handle user input for a number in a range
     * @param min : int
     * @param max : int
     * @param prompt : String
     * @param errorMessage : String
     * @return choice
     *
     * Algorithm:
     *      1. Create a variable choice to hold user input
     *      2. Create a do while statement which will run user input not within passed in range
     *          2.1. Create a try and catch to handle when user inputs a string
     *          2.2. In try block:
     *              2.2.1. Display passed in prompt to user
     *              2.2.2. Accept user input through Scanner object
     *              2.2.3. Display error message to user if input not within passed in range
     *          2.3. In catch block:
     *              2.3.1. Tell the user to enter an integer
     */
    public static int enterChoice(int min, int max, String prompt, String errorMessage) {
        int choice = -1;
        do {
            try {
                System.out.print(prompt);
                choice = Integer.parseInt(keyboard.nextLine());
                if (choice <min || choice >max)
                    System.out.println(errorMessage);
            } catch (NumberFormatException ex) {
                System.out.println("Enter an integer.");
            }
        } while(choice <min || choice > max);
        return choice;
    }

    /**
     * Method to handle logic for adding an object
     * Algorithm:
     *      1. Call the showAddMenu method
     *      2. Use enterChoice method to get user input for where they would like to input new book in the list
     *      3. Create an int object to hold possible index (if user chooses to add at an index)
     *      4. If user chooses to add at an index request index from user using Scanner object
     *      5. Call the requestBook method to request book details from user
     *      6. Create a switch statement to handle user's choice of where to add
     *          6.1. call insertAtHead method if user choice == 1
     *          6.2. call insertAtTail method if user choice == 2
     *          6.3. call insertAtIndex method if user choice == 3 and pass in the index requested
     */
    public static void addObject() {
        showAddMenu();
        int choice = enterChoice(1,3, "Enter your choice: ",invalidNumber);
        int index = 0;
        if (choice==3)
            index = enterChoice(0, bookList.getSize(),"Enter index: ", indexDoesNotExist);
        Book newbook = requestBook();
        switch (choice) {
            case 1 -> bookList.addAtHead(newbook);
            case 2 -> bookList.insert(newbook);
            case 3 -> bookList.addAtIndex(index,newbook);
        }
    }

    /**
     * Method to handle asking user to enter book details
     * @return Book
     * Algorithm:
     *      1. Have user enter the type of book and accept user input
     *      2. Have user enter the genre of book and accept user input
     *      3. Create a boolean variable
     *      4. Wrap a do-while statement outside a try and catch statement for requesting  number of pages from
     *      user such that even when the user inputs a String by accident the program will not come to a halt due
     *      to the error.
     *      5. Create a new book object from passed in book information and return it
     */
    public static Book requestBook() {
        System.out.print("  Enter the name of book: ");
        String bookName = keyboard.nextLine();
        System.out.print("  Enter the genre of the book: ");
        String bookGenre = keyboard.nextLine();
        boolean condition = false;
        int pagesNumber = 0;
        do {
            try {
                System.out.print("  Enter the number of pages of the book: ");
                pagesNumber = Integer.parseInt(keyboard.nextLine());
                condition = true;
            } catch (NumberFormatException ex){
                System.out.println("Enter a valid number. Try again.");
            }
        } while (!condition);
        return new Book(bookName,bookGenre,pagesNumber);
    }

    /**
     * Method to show the options for where to add a book
     * Algorithm:
     *      1. Make use of println to show all the possible ways to add a book to the book List
     */
    public static void showAddMenu(){
        System.out.println("------------------------------------------------------------------------");
        System.out.println("    1. Add a book at head. ");
        System.out.println("    2. Add a book at tail. ");
        System.out.println("    3. Add a book at an index. ");
        System.out.println("------------------------------------------------------------------------");
    }

    /**
     * Method to show the options for which book to delete
     * Algorithm:
     *      1. Make use of println to show all the possible options to deleting a book in Book list.
     */
    public static void showDeleteMenu(){
        System.out.println("------------------------------------------------------------------------");
        System.out.println("    1. Delete book at head. ");
        System.out.println("    2. Delete book at tail. ");
        System.out.println("    3. Delete a book at an index. ");
        System.out.println("------------------------------------------------------------------------");
    }

    /**
     * Method to handle the logic deleting an object from the list
     * Algorithm:
     *      1. Call the showDeleteMenu method
     *      2. Request a choice from the user between the range of possible delete option
     *      3. Create an int object to hold possible index (if user chooses to add at an index)
     *      4. If user chooses to delete at an index request index from user using Scanner object
     *      5. Create a switch statement to handle user's choice of where to delete
     *          6.1. call deleteAtHead method if user choice == 1
     *          6.2. call deleteAtTail method if user choice == 2
     *          6.3. call deleteAtIndex method if user choice == 3 and pass in the index requested
     */
    public static void deleteObject() throws NullPointerException{
        showDeleteMenu();
        int choice = enterChoice(1,3, "Enter your choice: ",invalidNumber);
        int index = 0;
        if (choice==3)
            index = enterChoice(0, bookList.getSize(),"Enter index: ", indexDoesNotExist);
        switch (choice) {
            case 1 -> bookList.deleteHead();
            case 2 -> bookList.deleteTail();
            case 3 -> bookList.deleteAtIndex(index);
        }
    }

    /**
     * Method to handle getting an object from the list
     * Algorithm:
     *      1. Request an index from user using the enterChoice method
     *      2. Insert the index specified to the get method of bookList and display the returned book to user.
     */
    public static void getObject()  {
        if ( bookList.getSize() !=0) {
            int choice = enterChoice(0, bookList.getSize() - 1, "Enter the index of the book you would like to get: ", invalidNumber);
            System.out.println(bookList.get(choice));
        } else {
            System.out.println("There are no books in the list.");
        }
    }

    /**
     * Method to handle quitting of the program
     * Algorithm:
     *      1. Display a thank you message to user
     *      2. Quit program.
     */
    public static void quit() {
        System.out.println("Thank you for using the program!");
        System.exit(0);
    }

    /**
     * Method to handle showing all books in list to user
     * Algorithm:
     *      1. Create a for loop to iterate through all books in the list and display each of them to user.
     */
    public static void showBooks() {
        for (int x = 0; x<bookList.getSize(); x++)
            System.out.println((x+1) + ". " + bookList.get(x));
    }

}
